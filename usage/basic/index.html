
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.4">
    
    
      
        <title>Basic Usage - Spec Classes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.db9e7362.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/colors.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#the-spec_class-decorator" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Spec Classes" class="md-header__button md-logo" aria-label="Spec Classes" data-md-component="logo">
      
  <img src="../../assets/images/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Spec Classes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Basic Usage
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Introduction
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../examples/" class="md-tabs__link">
        Examples
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        Usage
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../implementation/how_it_works/" class="md-tabs__link">
        Implementation Details
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Spec Classes" class="md-nav__button md-logo" aria-label="Spec Classes" data-md-component="logo">
      
  <img src="../../assets/images/logo.svg" alt="logo">

    </a>
    Spec Classes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/basic/" class="md-nav__link">
        Basic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/collections/" class="md-nav__link">
        Collections
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/dataclasses/" class="md-nav__link">
        Dataclass Interoperability
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/preparation/" class="md-nav__link">
        Preparation/Typecasting
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Usage" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Usage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Basic Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Basic Usage
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-spec_class-decorator" class="md-nav__link">
    The spec_class decorator
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#managed-attributes" class="md-nav__link">
    Managed attributes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#constructor" class="md-nav__link">
    Constructor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keyed-spec-classes" class="md-nav__link">
    Keyed Spec Classes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#type-checking" class="md-nav__link">
    Type checking
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helper-methods" class="md-nav__link">
    Helper methods
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_3">
          Helper Methods
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Helper Methods" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Helper Methods
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../methods/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../methods/toplevel/" class="md-nav__link">
        Toplevel Methods
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../methods/scalars/" class="md-nav__link">
        Scalar Methods
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../methods/collections/" class="md-nav__link">
        Collection Methods
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../special_types/" class="md-nav__link">
        Special Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/" class="md-nav__link">
        Advanced Usage
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Implementation Details
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Implementation Details" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Implementation Details
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../implementation/how_it_works/" class="md-nav__link">
        How It Works
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../implementation/performance/" class="md-nav__link">
        Performance Implications
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Basic Usage</h1>
                
                <h2 id="the-spec_class-decorator">The <code>spec_class</code> decorator<a class="headerlink" href="#the-spec_class-decorator" title="Permanent link">&para;</a></h2>
<p>The primary entry-point into <code>spec_classes</code> is the <code>spec_class</code> decorator, which
takes your standard class and converts it into a "spec-class" (ðŸŒŸ ooh... shiny!
ðŸŒŸ). In practice, this just means that it adds some dunder magic methods like
<code>__init__</code> and <code>__setattr__</code>, along with a few <a href="#helper-methods">helper
methods</a>... and nothing else. This is intentionally very
similar to the standard library's
<a href="https://docs.python.org/3/library/dataclasses.html">dataclass</a>, and indeed you
can largely consider spec-classes to be a generalization of it.</p>
<p>Using spec-classes is as simple as decorating your annotated class with
<code>spec_class</code>. For example:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">spec_classes</span> <span class="kn">import</span> <span class="n">spec_class</span>

<span class="nd">@spec_class</span>
<span class="k">class</span> <span class="nc">MySpec</span><span class="p">:</span>
    <span class="n">my_str</span><span class="p">:</span> <span class="nb">str</span>
</code></pre></div>
<p>The result is a class that:</p>
<ul>
<li>Thoroughly type-checks class attributes whenever and however they are mutated.</li>
<li>Has helper methods that assist with the mutation of annotated attributes,
  allowing one to adopt copy-on-write workflows (see <a href="#helper-methods">below</a>
  for more details).</li>
<li>Knows how to output a human-friendly representation of the spec class when
  printed.</li>
<li>Knows how to compare itself with other instances of the spec class.</li>
</ul>
<p>As such, and with a huge amount of simplification, the above spec-class
declaration would be roughly similar to writing something like:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">from</span> <span class="nn">spec_classes</span> <span class="kn">import</span> <span class="n">MISSING</span>

<span class="k">class</span> <span class="nc">MySpec</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">my_str</span><span class="o">=</span><span class="n">MISSING</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">my_str</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">MISSING</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">my_str</span> <span class="o">=</span> <span class="n">my_str</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;MySpec(my_str=</span><span class="si">{</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;my_str&#39;</span><span class="p">,</span> <span class="n">MISSING</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">MySpec</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;my_str&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="s1">&#39;my_str&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">attr</span> <span class="o">==</span> <span class="s1">&#39;my_str&#39;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">my_str</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;`MySpec.my_str` should be a string.&quot;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">my_str</span><span class="o">=</span><span class="n">MISSING</span><span class="p">):</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">my_str</span> <span class="o">=</span> <span class="n">my_str</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">MISSING</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">my_str_transform</span><span class="o">=</span><span class="n">MISSING</span><span class="p">):</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">my_str</span> <span class="o">=</span> <span class="n">my_str_transform</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">my_str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="nf">with_my_str</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">my_str</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="nf">transform_my_str</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transform</span><span class="p">):</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">my_str</span> <span class="o">=</span> <span class="n">transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">my_str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="nf">reset_my_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">obj</span><span class="o">.</span><span class="n">my_str</span>
        <span class="k">return</span> <span class="n">obj</span>
</code></pre></div>
<p>The remainder of this documentation is dedicated to exploring exactly which
attributes get managed by spec-classes, which methods get generated when, and
how it all fits together.</p>
<h2 id="managed-attributes">Managed attributes<a class="headerlink" href="#managed-attributes" title="Permanent link">&para;</a></h2>
<p>By default, all annotated attributes in the class decorated with <code>@spec_class</code>
are managed by spec-classes. This means that the constructor and representation
of the spec class will consider all annotated attributes, and nothing else. For
example:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@spec_class</span>
<span class="k">class</span> <span class="nc">MySpec</span><span class="p">:</span>
    <span class="n">my_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Hello&quot;</span>
    <span class="n">my_int</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">MySpec</span><span class="p">(</span><span class="n">my_str</span><span class="o">=</span><span class="s2">&quot;Hi&quot;</span><span class="p">)</span>  <span class="c1"># All good.</span>
<span class="n">MySpec</span><span class="p">(</span><span class="n">my_int</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Raises a TypeError (`my_int` is not annotated, and therefore not managed)</span>
</code></pre></div>
<p>You can override, if necessary, the attributes that are considered by spec-classes
using the keyword arguments to the <code>@spec_class</code> decorator:</p>
<ul>
<li><strong>attrs</strong>: An iterable of strings indicating the names of attributes to be
    included. If not already annotated on the class, these will be given an
    annotation of <code>typing.Any</code>.</li>
<li><strong>attrs_typed</strong>: A mapping from the string name of the attribute to the type
    of the attribute to use (can override class annotations).</li>
<li><strong>attrs_skip</strong>: An iterable of attributes names to skip during determination
    of which fields to manage.</li>
</ul>
<p>Note that unless <code>attrs_skip</code> is provided, if <code>attrs</code> and/or <code>attrs_typed</code> are
provided, then spec-classes <strong>will not</strong> automatically manage other annotated
attributes on the class.</p>
<p>Extending our above example, you could do:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@spec_class</span><span class="p">(</span><span class="n">attrs_typed</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;my_int&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">},</span> <span class="n">attrs_skip</span><span class="o">=</span><span class="p">[])</span>
<span class="k">class</span> <span class="nc">MySpec</span><span class="p">:</span>
    <span class="n">my_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Hello&quot;</span>
    <span class="n">my_int</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">MySpec</span><span class="p">(</span><span class="n">my_str</span><span class="o">=</span><span class="s2">&quot;Hi&quot;</span><span class="p">)</span>  <span class="c1"># All good.</span>
<span class="n">MySpec</span><span class="p">(</span><span class="n">my_int</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># All good.</span>
</code></pre></div>
<h2 id="constructor">Constructor<a class="headerlink" href="#constructor" title="Permanent link">&para;</a></h2>
<p>Using the <code>@spec_class</code> decorator will by default add a constructor to the class
(unless one is already defined on the class). You can disable the addition of a
constructor by passing <code>init=False</code> to the decorator.</p>
<p>All arguments to the generated constructor must be passed by name (except for
the <code>key</code> attribute; see <a href="#keyed-spec-classes">below</a>). Also, instances of
spec-classes are permitted to have missing values. If the class does not provide
a default value for an attribute, instances will not have the attribute present,
and representations of the class will render it as <code>MISSING</code>. For example:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@spec_class</span>
<span class="k">class</span> <span class="nc">MySpec</span><span class="p">:</span>
    <span class="n">my_str</span><span class="p">:</span> <span class="nb">str</span>

<span class="n">MySpec</span><span class="p">()</span>  <span class="c1"># MySpec(my_str=MISSING)</span>
<span class="n">MySpec</span><span class="p">()</span><span class="o">.</span><span class="n">my_str</span>  <span class="c1"># AttributeError: `MySpec.my_str` has not yet been assigned a value.</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It is always safe to use mutable default values when using the default
constructor with your managed attributes. They will be deep-copied in the
constructor before being assigned to instances of your class. For example:
<div class="highlight"><pre><span></span><code><span class="nd">@spec_class</span>
<span class="k">class</span> <span class="nc">MySpec</span><span class="p">:</span>
    <span class="n">my_list</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>

<span class="k">assert</span> <span class="n">MySpec</span><span class="p">()</span><span class="o">.</span><span class="n">my_list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">MySpec</span><span class="o">.</span><span class="n">my_list</span>
</code></pre></div></p>
</div>
<h2 id="keyed-spec-classes">Keyed Spec Classes<a class="headerlink" href="#keyed-spec-classes" title="Permanent link">&para;</a></h2>
<p>Most attributes on a spec-class are treated identically and without privilege.
The one exception to that is an optional <code>key</code> attribute. Semantically, a key is
intended to uniquely identify an instance of a spec-class within some context,
and if configured <em>must</em> be assigned a value at instantiation time. To indicate
that a spec-class should be "keyed", pass the <code>key</code> argument to the <code>spec_class</code>
constructor. For example:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@spec_class</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s1">&#39;key&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">KeyedSpec</span><span class="p">:</span>
    <span class="n">key</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">value</span><span class="p">:</span> <span class="nb">str</span>

<span class="n">KeyedSpec</span><span class="p">(</span><span class="s1">&#39;my_key&#39;</span><span class="p">)</span>  <span class="c1"># KeyedSpec(key=&#39;my_key&#39;, value=MISSING)</span>
<span class="n">KeyedSpec</span><span class="p">()</span>  <span class="c1"># TypeError: __init__() missing 1 required positional argument: &#39;key&#39;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>key</code> attribute is the only attribute that does not need to be passed in
by name to the constructor. Also: if the class has a default for the key
attribute, it will be lifted up as the value in the instance (just like
other attributes).</p>
</div>
<h2 id="type-checking">Type checking<a class="headerlink" href="#type-checking" title="Permanent link">&para;</a></h2>
<p>All attributes managed by spec-classes are type-checked during initialization
and any mutation. Attempts to set attributes to an invalid type will result in a
<code>TypeError</code>. For example, from the above <code>MySpec</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">MySpec</span><span class="p">(</span><span class="n">my_str</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># TypeError: Attempt to set `MySpec.my_str` with an invalid type [got `1`; expecting `str`].</span>
</code></pre></div>
<h2 id="helper-methods">Helper methods<a class="headerlink" href="#helper-methods" title="Permanent link">&para;</a></h2>
<p>To simplify the adoption of copy-on-write workflows, and to make mutation of
instances more convenient and chainable, <code>spec_class</code> generates helper methods
for the base class and every managed attribute. The number and types of methods
added depends on type annotations, but in every case mutations performed by
these methods are (by default) done on copies of the original instance, and so
can be used safely on instances that are shared between multiple objects.
Refer to the <a href="../methods/">Helper Methods</a> documentation for more details.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../" class="md-footer__link md-footer__link--prev" aria-label="Previous: Overview" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Overview
            </div>
          </div>
        </a>
      
      
        
        <a href="../methods/" class="md-footer__link md-footer__link--next" aria-label="Next: Overview" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Overview
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.top", "navigation.tracking", "toc.integrate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.8397ff9e.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.1e84347e.min.js"></script>
      
    
  </body>
</html>